<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Medical History - MediFile</title>
    <meta name="description" content="View and manage your complete medical history with MediFile. Access medical records, lab results, medications, and health timeline securely.">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', Arial, sans-serif;
            background: linear-gradient(135deg, #e0f7fa 0%, #f4f9fd 100%);
            color: #1e293b;
            margin: 0;
            padding: 0;
        }
        .navbar {
            background: #10b981;
            color: #fff;
            box-shadow: 0 2px 12px rgba(16, 185, 129, 0.08);
        }
        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 24px;
        }
        .nav-logo {
            font-size: 1.7rem;
            font-weight: 800;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .nav-logo i {
            color: #fff;
        }
        .nav-menu {
            list-style: none;
            display: flex;
            gap: 28px;
            margin: 0;
            padding: 0;
        }
        .nav-link {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.05rem;
            transition: color 0.2s;
        }
        .nav-link.active,
        .nav-link:hover {
            color: #064e3b;
        }
        .nav-auth button {
            margin-left: 12px;
            border: none;
            border-radius: 6px;
            padding: 8px 18px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        .btn-login {
            background: #fff;
            color: #10b981;
        }
        .btn-login:hover {
            background: #d1fae5;
        }
        .btn-signup {
            background: #2563eb;
            color: #fff;
        }
        .btn-signup:hover {
            background: #1e40af;
        }
        /* --- Main content styles (themed) --- */
        .history-container {
            max-width: 1400px;
            margin: 80px auto 40px;
            padding: 0 20px;
        }
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .patient-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .patient-avatar {
            width: 80px;
            height: 80px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 24px;
            font-weight: 600;
        }
        .patient-details h1 {
            font-size: 28px;
            color: #1e293b;
            margin-bottom: 5px;
        }
        .patient-meta {
            color: #64748b;
            font-size: 14px;
        }
        .quick-actions {
            display: flex;
            gap: 10px;
        }
        .btn-action {
            background: #10b981;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s ease;
        }
        .btn-action:hover {
            background: #059669;
        }
        .btn-action.secondary {
            background: #f8fafc;
            color: #10b981;
            border: 1px solid #10b981;
        }
        .btn-action.secondary:hover {
            background: #d1fae5;
        }
        .history-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
        }
        .sidebar {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(16,185,129,0.08);
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        .sidebar-nav {
            list-style: none;
        }
        .sidebar-nav li {
            margin-bottom: 5px;
        }
        .sidebar-nav a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: #10b981;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background: #d1fae5;
            color: #2563eb;
        }
        .main-content {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(16,185,129,0.08);
        }
        .content-section {
            display: none;
            padding: 30px;
        }
        .content-section.active {
            display: block;
        }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f1f5f9;
        }
        .section-title {
            font-size: 24px;
            color: #10b981;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #10b981;
        }
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #10b981;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -37px;
            top: 25px;
            width: 10px;
            height: 10px;
            background: #10b981;
            border-radius: 50%;
            border: 3px solid #fff;
        }
        .timeline-date {
            font-size: 12px;
            color: #64748b;
            font-weight: 500;
            margin-bottom: 8px;
        }
        .timeline-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }
        .timeline-description {
            color: #64748b;
            line-height: 1.5;
        }
        .record-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .record-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }
        .record-card:hover {
            box-shadow: 0 4px 12px rgba(16,185,129,0.10);
            transform: translateY(-2px);
        }
        .record-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        .record-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 5px;
        }
        .record-date {
            font-size: 12px;
            color: #64748b;
        }
        .record-content {
            margin-bottom: 15px;
        }
        .record-actions {
            display: flex;
            gap: 10px;
        }
        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-view {
            background: #d1fae5;
            color: #10b981;
        }
        .btn-view:hover {
            background: #b6f3d7;
        }
        .btn-download {
            background: #e0f2fe;
            color: #2563eb;
        }
        .btn-download:hover {
            background: #bae6fd;
        }
        .vital-signs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        .vital-card {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e5e7eb;
        }
        .vital-value {
            font-size: 24px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 5px;
        }
        .vital-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .vital-trend {
            font-size: 12px;
            margin-top: 5px;
        }
        .trend-up {
            color: #dc2626;
        }
        .trend-down {
            color: #16a34a;
        }
        .trend-stable {
            color: #64748b;
        }
        .medication-list {
            list-style: none;
        }
        .medication-item {
            display: flex;
            justify-content: between;
            align-items: center;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid #e5e7eb;
        }
        .medication-info h4 {
            font-size: 16px;
            color: #1e293b;
            margin-bottom: 5px;
        }
        .medication-dosage {
            font-size: 14px;
            color: #64748b;
        }
        .medication-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        .status-active {
            background: #dcfce7;
            color: #166534;
        }
        .status-completed {
            background: #f3f4f6;
            color: #6b7280;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e5e7eb;
        }
        .modal-title {
            font-size: 20px;
            color: #1e293b;
        }
        .btn-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #64748b;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
        }
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        @media (max-width: 768px) {
            .history-layout {
                grid-template-columns: 1fr;
            }
            .sidebar {
                position: static;
                margin-bottom: 20px;
            }
            .record-grid {
                grid-template-columns: 1fr;
            }
            .vital-signs {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-heartbeat"></i>
                <span>MediFile</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="home.html#home" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="appointments.html" class="nav-link">Appointments</a>
                </li>
                <li class="nav-item">
                    <a href="prescriptions.html" class="nav-link">Prescriptions</a>
                </li>
                <li class="nav-item">
                    <a href="patient-history.html" class="nav-link active">My Health</a>
                </li>
            </ul>
            <div class="nav-auth">
                <button class="btn-login" onclick="openLoginModal()">Login</button>
                <button class="btn-signup" onclick="openSignupModal()">Sign Up</button>
            </div>
        </div>
    </nav>

    <!-- Medical History Container -->
    <div class="history-container">
        <!-- Header -->
        <div class="history-header">
            <div class="patient-info">
                <div class="patient-avatar">JS</div>
                <div class="patient-details">
                    <h1>John Smith</h1>
                    <div class="patient-meta">
                        DOB: January 15, 1985 • Age: 39 • ID: PT-2024-001<br>
                        Blood Type: A+ • Emergency Contact: Jane Smith (555) 123-4567
                    </div>
                </div>
            </div>
            <div class="quick-actions">
                <button class="btn-action" onclick="addRecord()">
                    <i class="fas fa-plus"></i> Add Record
                </button>
                <button class="btn-action secondary" onclick="exportHistory()">
                    <i class="fas fa-download"></i> Export
                </button>
                <button class="btn-action secondary" onclick="shareHistory()">
                    <i class="fas fa-share"></i> Share
                </button>
            </div>
        </div>

        <!-- Main Layout -->
        <div class="history-layout">
            <!-- Sidebar Navigation -->
            <div class="sidebar">
                <ul class="sidebar-nav">
                    <li><a href="#overview" class="nav-item active" onclick="showSection('overview', this)">
                        <i class="fas fa-chart-line"></i> Overview
                    </a></li>
                    <li><a href="#visits" class="nav-item" onclick="showSection('visits', this)">
                        <i class="fas fa-stethoscope"></i> Medical Visits
                    </a></li>
                    <li><a href="#medications" class="nav-item" onclick="showSection('medications', this)">
                        <i class="fas fa-pills"></i> Medications
                    </a></li>
                    <li><a href="#lab-results" class="nav-item" onclick="showSection('lab-results', this)">
                        <i class="fas fa-flask"></i> Lab Results
                    </a></li>
                    <li><a href="#immunizations" class="nav-item" onclick="showSection('immunizations', this)">
                        <i class="fas fa-syringe"></i> Immunizations
                    </a></li>
                    <li><a href="#allergies" class="nav-item" onclick="showSection('allergies', this)">
                        <i class="fas fa-exclamation-triangle"></i> Allergies
                    </a></li>
                    <li><a href="#family-history" class="nav-item" onclick="showSection('family-history', this)">
                        <i class="fas fa-users"></i> Family History
                    </a></li>
                </ul>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Overview Section -->
                <div id="overview" class="content-section active">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-chart-line"></i> Health Overview
                        </h2>
                        <button class="btn-action secondary" onclick="updateVitals()">
                            <i class="fas fa-edit"></i> Update Vitals
                        </button>
                    </div>

                    <!-- Current Vital Signs -->
                    <h3 style="margin-bottom: 15px; color: #1e293b;">Current Vital Signs</h3>
                    <div class="vital-signs">
                        <div class="vital-card">
                            <div class="vital-value">120/80</div>
                            <div class="vital-label">Blood Pressure</div>
                            <div class="vital-trend trend-stable">
                                <i class="fas fa-minus"></i> Stable
                            </div>
                        </div>
                        <div class="vital-card">
                            <div class="vital-value">72</div>
                            <div class="vital-label">Heart Rate</div>
                            <div class="vital-trend trend-down">
                                <i class="fas fa-arrow-down"></i> -2 bpm
                            </div>
                        </div>
                        <div class="vital-card">
                            <div class="vital-value">175 lbs</div>
                            <div class="vital-label">Weight</div>
                            <div class="vital-trend trend-up">
                                <i class="fas fa-arrow-up"></i> +3 lbs
                            </div>
                        </div>
                        <div class="vital-card">
                            <div class="vital-value">5'10"</div>
                            <div class="vital-label">Height</div>
                            <div class="vital-trend trend-stable">
                                <i class="fas fa-minus"></i> Stable
                            </div>
                        </div>
                        <div class="vital-card">
                            <div class="vital-value">24.8</div>
                            <div class="vital-label">BMI</div>
                            <div class="vital-trend trend-stable">
                                <i class="fas fa-minus"></i> Normal
                            </div>
                        </div>
                        <div class="vital-card">
                            <div class="vital-value">98.6°F</div>
                            <div class="vital-label">Temperature</div>
                            <div class="vital-trend trend-stable">
                                <i class="fas fa-minus"></i> Normal
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity Timeline -->
                    <h3 style="margin-bottom: 20px; color: #1e293b;">Recent Health Activity</h3>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-date">March 15, 2025</div>
                            <div class="timeline-title">Annual Physical Exam</div>
                            <div class="timeline-description">
                                Comprehensive physical examination with Dr. Sarah Johnson. All vital signs normal. Recommended continued exercise and healthy diet.
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-date">February 28, 2025</div>
                            <div class="timeline-title">Blood Work - Routine Panel</div>
                            <div class="timeline-description">
                                Complete blood count, lipid panel, and glucose levels. All results within normal ranges. Cholesterol slightly elevated - dietary changes recommended.
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-date">January 20, 2025</div>
                            <div class="timeline-title">Flu Vaccination</div>
                            <div class="timeline-description">
                                Annual influenza vaccination administered. No adverse reactions reported.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Medical Visits Section -->
                <div id="visits" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-stethoscope"></i> Medical Visits
                        </h2>
                        <button class="btn-action" onclick="scheduleVisit()">
                            <i class="fas fa-calendar-plus"></i> Schedule Visit
                        </button>
                    </div>

                    <div class="record-grid">
                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Annual Physical Exam</div>
                                    <div class="record-date">March 15, 2025 • Dr. Sarah Johnson</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p>Comprehensive annual examination including vital signs, physical assessment, and health screening. Patient reports good overall health with no new concerns.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="viewRecord('visit-1')">View Details</button>
                                <button class="btn-small btn-download" onclick="downloadRecord('visit-1')">Download</button>
                            </div>
                        </div>

                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Follow-up Consultation</div>
                                    <div class="record-date">February 10, 2025 • Dr. Michael Chen</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p>Follow-up for elevated cholesterol levels. Discussed dietary modifications and exercise recommendations. Blood pressure stable.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="viewRecord('visit-2')">View Details</button>
                                <button class="btn-small btn-download" onclick="downloadRecord('visit-2')">Download</button>
                            </div>
                        </div>

                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Urgent Care Visit</div>
                                    <div class="record-date">January 5, 2025 • Dr. Amanda Wilson</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p>Acute upper respiratory infection. Prescribed antibiotics and rest. Symptoms resolved within one week.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="viewRecord('visit-3')">View Details</button>
                                <button class="btn-small btn-download" onclick="downloadRecord('visit-3')">Download</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Medications Section -->
                <div id="medications" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-pills"></i> Current Medications
                        </h2>
                        <button class="btn-action" onclick="addMedication()">
                            <i class="fas fa-plus"></i> Add Medication
                        </button>
                    </div>

                    <ul class="medication-list">
                        <li class="medication-item">
                            <div class="medication-info">
                                <h4>Lisinopril 10mg</h4>
                                <div class="medication-dosage">Once daily • Prescribed by Dr. Sarah Johnson • Started: Jan 2024</div>
                            </div>
                            <span class="medication-status status-active">Active</span>
                        </li>
                        <li class="medication-item">
                            <div class="medication-info">
                                <h4>Vitamin D3 2000 IU</h4>
                                <div class="medication-dosage">Once daily • Prescribed by Dr. Emily Rodriguez • Started: Feb 2024</div>
                            </div>
                            <span class="medication-status status-active">Active</span>
                        </li>
                        <li class="medication-item">
                            <div class="medication-info">
                                <h4>Amoxicillin 500mg</h4>
                                <div class="medication-dosage">Three times daily • Prescribed by Dr. Amanda Wilson • Jan 5-12, 2025</div>
                            </div>
                            <span class="medication-status status-completed">Completed</span>
                        </li>
                    </ul>
                </div>

                <!-- Lab Results Section -->
                <div id="lab-results" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-flask"></i> Lab Results
                        </h2>
                        <button class="btn-action secondary" onclick="uploadResults()">
                            <i class="fas fa-upload"></i> Upload Results
                        </button>
                    </div>

                    <div class="record-grid">
                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Complete Blood Count (CBC)</div>
                                    <div class="record-date">February 28, 2025 • Quest Diagnostics</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p><strong>Results:</strong> All values within normal range. WBC: 6.2, RBC: 4.5, Hemoglobin: 14.2, Hematocrit: 42.1</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="viewRecord('lab-1')">View Results</button>
                                <button class="btn-small btn-download" onclick="downloadRecord('lab-1')">Download PDF</button>
                            </div>
                        </div>

                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Lipid Panel</div>
                                    <div class="record-date">February 28, 2025 • Quest Diagnostics</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p><strong>Results:</strong> Total Cholesterol: 220 mg/dL (slightly elevated), LDL: 140, HDL: 52, Triglycerides: 135</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="viewRecord('lab-2')">View Results</button>
                                <button class="btn-small btn-download" onclick="downloadRecord('lab-2')">Download PDF</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Immunizations Section -->
                <div id="immunizations" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-syringe"></i> Immunization Record
                        </h2>
                        <button class="btn-action" onclick="addImmunization()">
                            <i class="fas fa-plus"></i> Add Record
                        </button>
                    </div>

                    <div class="record-grid">
                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Influenza Vaccine</div>
                                    <div class="record-date">January 20, 2025 • CVS Pharmacy</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p>Annual flu shot administered. Lot #: FLU2025-001. No adverse reactions reported.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="viewRecord('imm-1')">View Certificate</button>
                                <button class="btn-small btn-download" onclick="downloadRecord('imm-1')">Download</button>
                            </div>
                        </div>

                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">COVID-19 Booster</div>
                                    <div class="record-date">September 15, 2024 • Walgreens</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p>Updated COVID-19 booster vaccination. Manufacturer: Pfizer-BioNTech. Lot #: COVID2024-B15.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="viewRecord('imm-2')">View Certificate</button>
                                <button class="btn-small btn-download" onclick="downloadRecord('imm-2')">Download</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Allergies Section -->
                <div id="allergies" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-exclamation-triangle"></i> Known Allergies
                        </h2>
                        <button class="btn-action" onclick="addAllergy()">
                            <i class="fas fa-plus"></i> Add Allergy
                        </button>
                    </div>

                    <div class="record-grid">
                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Penicillin</div>
                                    <div class="record-date">Severity: Moderate • Discovered: 2018</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p><strong>Reaction:</strong> Skin rash, hives<br>
                                <strong>Notes:</strong> Avoid all penicillin-based antibiotics. Use alternatives like azithromycin or cephalexin.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="editAllergy('allergy-1')">Edit</button>
                            </div>
                        </div>

                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Peanuts</div>
                                    <div class="record-date">Severity: Mild • Discovered: Childhood</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p><strong>Reaction:</strong> Digestive upset, mild nausea<br>
                                <strong>Notes:</strong> Can tolerate small amounts but prefer to avoid. No respiratory symptoms.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="editAllergy('allergy-2')">Edit</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Family History Section -->
                <div id="family-history" class="content-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-users"></i> Family Medical History
                        </h2>
                        <button class="btn-action" onclick="addFamilyHistory()">
                            <i class="fas fa-plus"></i> Add History
                        </button>
                    </div>

                    <div class="record-grid">
                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Father - Hypertension</div>
                                    <div class="record-date">Diagnosed: Age 55 • Status: Managed</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p>High blood pressure diagnosed at age 55. Currently managed with medication and lifestyle changes. No complications.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="editFamilyHistory('family-1')">Edit</button>
                            </div>
                        </div>

                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Mother - Type 2 Diabetes</div>
                                    <div class="record-date">Diagnosed: Age 62 • Status: Managed</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p>Type 2 diabetes mellitus diagnosed 5 years ago. Well-controlled with metformin and dietary management. Regular monitoring.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="editFamilyHistory('family-2')">Edit</button>
                            </div>
                        </div>

                        <div class="record-card">
                            <div class="record-header">
                                <div>
                                    <div class="record-title">Maternal Grandfather - Heart Disease</div>
                                    <div class="record-date">Age at Death: 78 • Cause: Myocardial Infarction</div>
                                </div>
                            </div>
                            <div class="record-content">
                                <p>History of coronary artery disease. Suffered fatal heart attack at age 78. Had previous bypass surgery at age 70.</p>
                            </div>
                            <div class="record-actions">
                                <button class="btn-small btn-view" onclick="editFamilyHistory('family-3')">Edit</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Record Modal -->
    <div id="addRecordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Medical Record</h3>
                <button class="btn-close" onclick="closeModal('addRecordModal')">&times;</button>
            </div>
            <form id="addRecordForm">
                <div class="form-group">
                    <label for="recordType">Record Type</label>
                    <select id="recordType" name="recordType" required>
                        <option value="">Select Type</option>
                        <option value="visit">Medical Visit</option>
                        <option value="lab">Lab Result</option>
                        <option value="medication">Medication</option>
                        <option value="immunization">Immunization</option>
                        <option value="allergy">Allergy</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="recordTitle">Title</label>
                    <input type="text" id="recordTitle" name="recordTitle" required>
                </div>
                <div class="form-group">
                    <label for="recordDate">Date</label>
                    <input type="date" id="recordDate" name="recordDate" required>
                </div>
                <div class="form-group">
                    <label for="recordProvider">Healthcare Provider</label>
                    <input type="text" id="recordProvider" name="recordProvider" required>
                </div>
                <div class="form-group">
                    <label for="recordNotes">Notes/Details</label>
                    <textarea id="recordNotes" name="recordNotes" placeholder="Enter detailed information about this record"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="btn-action secondary" onclick="closeModal('addRecordModal')">Cancel</button>
                    <button type="submit" class="btn-action">Save Record</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Include the main script for navigation and modals -->
    <script src="script.js"></script>
    
    <script>
        // Navigation and content switching
        function showSection(sectionId, navElement) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.sidebar-nav .nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            navElement.classList.add('active');
        }

        // Modal functions
        function addRecord() {
            document.getElementById('addRecordModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function addMedication() {
            showNotification('Redirecting to prescription management...', 'info');
            setTimeout(() => {
                window.location.href = 'prescriptions.html';
            }, 1000);
        }

        function scheduleVisit() {
            showNotification('Redirecting to appointment scheduling...', 'info');
            setTimeout(() => {
                window.location.href = 'appointments.html';
            }, 1000);
        }

        function exportHistory() {
            showNotification('Preparing medical history export... This may take a moment.', 'info');
            setTimeout(() => {
                showNotification('Medical history exported successfully! Check your downloads folder.', 'success');
            }, 2000);
        }

        function shareHistory() {
            const shareData = {
                title: 'Medical History - John Smith',
                text: 'Sharing medical history access with healthcare provider',
                url: window.location.href
            };
            
            if (navigator.share) {
                navigator.share(shareData);
            } else {
                // Fallback
                navigator.clipboard.writeText(window.location.href);
                showNotification('Share link copied to clipboard!', 'success');
            }
        }

        function updateVitals() {
            showNotification('Vital signs update form coming soon. Contact your healthcare provider to update.', 'info');
        }

        function viewRecord(recordId) {
            showNotification(`Opening detailed view for record ${recordId}...`, 'info');
        }

        function downloadRecord(recordId) {
            showNotification(`Downloading record ${recordId}...`, 'info');
            setTimeout(() => {
                showNotification('Download completed!', 'success');
            }, 1500);
        }

        function uploadResults() {
            showNotification('File upload feature coming soon. Please contact your healthcare provider.', 'info');
        }

        function addImmunization() {
            addRecord();
            document.getElementById('recordType').value = 'immunization';
            document.getElementById('recordTitle').focus();
        }

        function addAllergy() {
            addRecord();
            document.getElementById('recordType').value = 'allergy';
            document.getElementById('recordTitle').focus();
        }

        function addFamilyHistory() {
            showNotification('Family history form coming soon.', 'info');
        }

        function editAllergy(allergyId) {
            showNotification(`Opening allergy editor for ${allergyId}...`, 'info');
        }

        function editFamilyHistory(historyId) {
            showNotification(`Opening family history editor for ${historyId}...`, 'info');
        }

        // Form submission
        document.getElementById('addRecordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const recordData = {
                type: formData.get('recordType'),
                title: formData.get('recordTitle'),
                date: formData.get('recordDate'),
                provider: formData.get('recordProvider'),
                notes: formData.get('recordNotes')
            };
            
            showNotification('Adding medical record...', 'info');
            
            setTimeout(() => {
                showNotification('Medical record added successfully!', 'success');
                closeModal('addRecordModal');
                this.reset();
            }, 1500);
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(e) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>